(function (){
var f=void 0,h=!0,i=null,k=!1,l,aa=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function m(a){return"array"==ba(a)}Math.floor(2147483648*Math.random()).toString(36);function ca(a,b,c){return a.call.apply(a.bind,arguments)}function da(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ea(a,b,c){ea=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ca:da;return ea.apply(i,arguments)}function fa(a,b){var c=a.split("."),d=aa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==f?d[e]=b:d=d[e]?d[e]:d[e]={}}function n(a,b){function c(){}c.prototype=b.prototype;a.qc=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ga(a){Error.captureStackTrace?Error.captureStackTrace(this,ga):this.stack=Error().stack||"";a&&(this.message=String(a))}n(ga,Error);ga.prototype.name="CustomError";function ha(a,b,c){this.nc=a;this.j=b;this.A=c.name;this.z=!!c.m;this.mc=!!c.required;this.i=c.a;this.fa=c.type;this.ta=k;switch(this.i){case ia:case ja:case ka:case la:case ma:this.ta=h}this.P=c.defaultValue}var ia=3,ja=4,ka=6,la=16,ma=18;var na=Array.prototype;function oa(a,b){return a>b?1:a<b?-1:0};function pa(a,b,c){this.Ca=a;this.A=b.name||i;this.lc=b.d||i;this.ic=b.f;this.o={};for(a=0;a<c.length;a++)b=c[a],this.o[b.j]=b}function qa(a){var a=a.o,b=[],c=0,d;for(d in a)b[c++]=a[d];na.sort.call(b,function(a,b){return a.j-b.j}||oa);return b};function o(){this.l={};this.r=this.constructor.r;this.o=this.r.o;this.q=this.ea=i}l=o.prototype;l.H=function(){return this.r};l.get=function(a,b){return q(this,a.j,b)};l.set=function(a,b){r(this,a.j,b)};l.add=function(a,b){ra(this,a.j,b)};
l.h=function(a){if(!a||this.constructor!=a.constructor)return k;for(var b=qa(this.H()),c=0;c<b.length;c++){var d=b[c];if(t(this,d.j)!=t(a,d.j))return k;if(t(this,d.j)){var e=11==d.i||10==d.i,j=sa(this,d),g=sa(a,d);if(d.z){if(j.length!=g.length)return k;for(d=0;d<j.length;d++)if(!(e?j[d].h(g[d]):j[d]==g[d]))return k}else if(!(e?j.h(g):j==g))return k}}return h};function t(a,b){return b in a.l&&a.l[b]!==f&&a.l[b]!==i}
function sa(a,b){var c=b.j;if(!c in a.l)return i;var d=a.l[c];return d==i?i:a.ea?!(c in a.q)?(d=a.ea.jc(a,b,d),a.q[c]=d):a.q[c]:d}function q(a,b,c){b=a.o[b];a=sa(a,b);if(b.z)return m(a),a[c||0];m(a);return a}function v(a,b){var c;if(t(a,b))c=q(a,b,f);else{c=a.o[b];if(c.P===f){var d=c.fa;c.P=d===Boolean?k:d===Number?0:d===String?"":new d}c=c.P}return c}function ta(a,b){return a.o[b].z?(t(a,b)&&m(a.l[b]),t(a,b)?a.l[b].length:0):t(a,b)?1:0}function r(a,b,c){a.l[b]=c;a.q&&(a.q[b]=c)}
function ra(a,b,c){a.l[b]||(a.l[b]=[]);a.l[b].push(c);a.q&&delete a.q[b]}function w(a,b){var c=[],d,e;for(e in b)b.hasOwnProperty(e)&&(0==e?d=b[0]:c.push(new ha(a,e,b[e])));a.r=new pa(a,d,c);a.H=function(){return a.r}};function x(){o.apply(this)}n(x,o);function y(){o.apply(this)}n(y,o);y.prototype.V=function(a){r(this,1,a)};y.prototype.ka=function(a){r(this,2,a)};function z(){o.apply(this)}n(z,o);z.prototype.b=function(a){r(this,1,a)};z.prototype.V=function(a){r(this,2,a)};var A=3,ua={vb:0,gc:1,yb:2,Va:A,ob:4,fb:5,Jb:6,Xb:7,JSON:8,BOOL:9,Qa:10,Kb:11,kb:12,cc:13,ub:14};function va(){o.apply(this)}n(va,o);function B(){o.apply(this)}n(B,o);function C(a,b){ra(a,2,b)}function wa(){o.apply(this)}n(wa,o);
function D(){o.apply(this)}n(D,o);D.prototype.p=function(){return v(this,1)};D.prototype.n=function(a){r(this,1,a)};D.prototype.u=function(a){r(this,2,a)};D.prototype.M=function(a){r(this,3,a)};function xa(){o.apply(this)}n(xa,o);xa.prototype.p=function(){return v(this,1)};xa.prototype.n=function(a){r(this,1,a)};function E(){o.apply(this)}n(E,o);E.prototype.b=function(a){r(this,1,a)};E.prototype.L=function(a){r(this,2,a)};
var ya=19,za={Hb:1,jb:2,pb:3,nb:4,qb:5,Mb:6,rb:7,Cb:8,Ra:9,Ub:11,Na:14,Yb:15,Eb:16,bb:17,Db:18,Wa:ya,gb:20,Bb:21,Xa:22,Lb:23,ab:24,xb:26,ec:27,Ib:28,Wb:29,Sa:30,Sb:31,lb:32,Pa:35,Oa:36,Qb:37};function Aa(){o.apply(this)}n(Aa,o);function Ba(){o.apply(this)}n(Ba,o);Ba.prototype.v=function(a){r(this,1,a)};function Ca(){o.apply(this)}n(Ca,o);Ca.prototype.v=function(a){r(this,1,a)};function Da(){o.apply(this)}n(Da,o);Da.prototype.L=function(a){r(this,1,a)};function Ea(){o.apply(this)}n(Ea,o);
function Fa(){o.apply(this)}n(Fa,o);Fa.prototype.u=function(a){r(this,1,a)};function Ga(){o.apply(this)}n(Ga,o);Ga.prototype.D=function(a){r(this,4,a)};function F(){o.apply(this)}n(F,o);F.prototype.U=function(a){r(this,1,a)};F.prototype.D=function(a){r(this,2,a)};function Ha(){o.apply(this)}n(Ha,o);Ha.prototype.U=function(a){r(this,1,a)};Ha.prototype.D=function(a){r(this,2,a)};function Ia(){o.apply(this)}n(Ia,o);Ia.prototype.ka=function(a){r(this,1,a)};function H(){o.apply(this)}n(H,o);
H.prototype.b=function(a){r(this,1,a)};function Ja(){o.apply(this)}n(Ja,o);Ja.prototype.v=function(a){r(this,2,a)};function Ka(){o.apply(this)}n(Ka,o);function La(){o.apply(this)}n(La,o);La.prototype.v=function(a){r(this,2,a)};function Ma(){o.apply(this)}n(Ma,o);Ma.prototype.p=function(){return v(this,1)};Ma.prototype.n=function(a){r(this,1,a)};function Na(){o.apply(this)}n(Na,o);Na.prototype.p=function(){return v(this,1)};Na.prototype.n=function(a){r(this,1,a)};function Oa(){o.apply(this)}n(Oa,o);
Oa.prototype.V=function(a){r(this,2,a)};function Pa(){o.apply(this)}n(Pa,o);l=Pa.prototype;l.p=function(){return v(this,1)};l.n=function(a){r(this,1,a)};l.u=function(a){r(this,2,a)};l.M=function(a){r(this,3,a)};l.v=function(a){r(this,4,a)};function I(){o.apply(this)}n(I,o);I.prototype.p=function(){return v(this,1)};I.prototype.n=function(a){r(this,1,a)};I.prototype.u=function(a){r(this,2,a)};I.prototype.M=function(a){r(this,3,a)};function Qa(){o.apply(this)}n(Qa,o);l=Qa.prototype;
l.p=function(){return v(this,1)};l.n=function(a){r(this,1,a)};l.u=function(a){r(this,2,a)};l.M=function(a){r(this,3,a)};l.v=function(a){r(this,4,a)};function Ra(){o.apply(this)}n(Ra,o);Ra.prototype.b=function(a){r(this,1,a)};function Sa(){o.apply(this)}n(Sa,o);Sa.prototype.p=function(){return v(this,2)};Sa.prototype.n=function(a){r(this,2,a)};function J(){o.apply(this)}n(J,o);J.prototype.b=function(a){r(this,1,a)};J.prototype.s=function(){return q(this,2)};J.prototype.la=function(a){r(this,2,a)};
function Ta(){o.apply(this)}n(Ta,o);Ta.prototype.s=function(){return q(this,2)};Ta.prototype.la=function(a){r(this,2,a)};function Ua(){o.apply(this)}n(Ua,o);w(x,{"0":{name:"TableRef",d:"TableRef"},1:{name:"db_name",a:9,type:String},2:{name:"table_name",a:9,type:String}});w(y,{"0":{name:"VarTermTuple",d:"VarTermTuple"},1:{name:"var",a:9,type:String},2:{name:"term",a:11,type:z}});
w(z,{"0":{name:"Term",d:"Term"},1:{name:"type",a:14,defaultValue:0,type:ua},2:{name:"var",a:9,type:String},3:{name:"let",a:11,type:va},4:{name:"call",a:11,type:B},5:{name:"if_",a:11,type:wa},6:{name:"error",a:9,type:String},7:{name:"number",a:1,type:Number},8:{name:"valuestring",a:9,type:String},9:{name:"jsonstring",a:9,type:String},10:{name:"valuebool",a:8,type:Boolean},11:{name:"array",m:h,a:11,type:z},12:{name:"object",m:h,a:11,type:y},14:{name:"get_by_key",a:11,type:D},15:{name:"table",a:11,type:xa},
16:{name:"javascript",a:9,type:String}});w(va,{"0":{name:"Let",f:z,d:"Term.Let"},1:{name:"binds",m:h,a:11,type:y},2:{name:"expr",a:11,type:z}});w(B,{"0":{name:"Call",f:z,d:"Term.Call"},1:{name:"builtin",a:11,type:E},2:{name:"args",m:h,a:11,type:z}});w(wa,{"0":{name:"If",f:z,d:"Term.If"},1:{name:"test",a:11,type:z},2:{name:"true_branch",a:11,type:z},3:{name:"false_branch",a:11,type:z}});
w(D,{"0":{name:"GetByKey",f:z,d:"Term.GetByKey"},1:{name:"table_ref",a:11,type:x},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:z}});w(xa,{"0":{name:"Table",f:z,d:"Term.Table"},1:{name:"table_ref",a:11,type:x}});
w(E,{"0":{name:"Builtin",d:"Builtin"},1:{name:"type",a:14,defaultValue:1,type:za},2:{name:"attr",a:9,type:String},3:{name:"attrs",m:h,a:9,type:String},4:{name:"comparison",a:14,defaultValue:1,type:{eb:1,Gb:2,Ab:3,wb:4,mb:5,ib:6}},5:{name:"filter",a:11,type:Aa},6:{name:"map",a:11,type:Ba},7:{name:"concat_map",a:11,type:Ca},8:{name:"order_by",m:h,a:11,type:Da},9:{name:"reduce",a:11,type:Ga},10:{name:"grouped_map_reduce",a:11,type:Ea},11:{name:"range",a:11,type:Fa}});
w(Aa,{"0":{name:"Filter",f:E,d:"Builtin.Filter"},1:{name:"predicate",a:11,type:Ha}});w(Ba,{"0":{name:"Map",f:E,d:"Builtin.Map"},1:{name:"mapping",a:11,type:F}});w(Ca,{"0":{name:"ConcatMap",f:E,d:"Builtin.ConcatMap"},1:{name:"mapping",a:11,type:F}});w(Da,{"0":{name:"OrderBy",f:E,d:"Builtin.OrderBy"},1:{name:"attr",a:9,type:String},2:{name:"ascending",a:8,defaultValue:1,type:Boolean}});
w(Ea,{"0":{name:"GroupedMapReduce",f:E,d:"Builtin.GroupedMapReduce"},1:{name:"group_mapping",a:11,type:F},2:{name:"value_mapping",a:11,type:F},3:{name:"reduction",a:11,type:Ga}});w(Fa,{"0":{name:"Range",f:E,d:"Builtin.Range"},1:{name:"attrname",a:9,type:String},2:{name:"lowerbound",a:11,type:z},3:{name:"upperbound",a:11,type:z}});w(Ga,{"0":{name:"Reduction",d:"Reduction"},1:{name:"base",a:11,type:z},2:{name:"var1",a:9,type:String},3:{name:"var2",a:9,type:String},4:{name:"body",a:11,type:z}});
w(F,{"0":{name:"Mapping",d:"Mapping"},1:{name:"arg",a:9,type:String},2:{name:"body",a:11,type:z}});w(Ha,{"0":{name:"Predicate",d:"Predicate"},1:{name:"arg",a:9,type:String},2:{name:"body",a:11,type:z}});w(Ia,{"0":{name:"ReadQuery",d:"ReadQuery"},1:{name:"term",a:11,type:z},2:{name:"max_chunk_size",a:3,type:String},3:{name:"max_age",a:3,type:String}});
w(H,{"0":{name:"WriteQuery",d:"WriteQuery"},1:{name:"type",a:14,defaultValue:1,type:{fc:1,$a:2,Fb:3,sb:4,tb:5,hb:6,Pb:7,Nb:8,Ob:9}},2:{name:"update",a:11,type:Ja},3:{name:"delete",a:11,type:Ka},4:{name:"mutate",a:11,type:La},5:{name:"insert",a:11,type:Ma},6:{name:"insert_stream",a:11,type:Na},7:{name:"for_each",a:11,type:Oa},8:{name:"point_update",a:11,type:Pa},9:{name:"point_delete",a:11,type:I},10:{name:"point_mutate",a:11,type:Qa}});
w(Ja,{"0":{name:"Update",f:H,d:"WriteQuery.Update"},1:{name:"view",a:11,type:z},2:{name:"mapping",a:11,type:F}});w(Ka,{"0":{name:"Delete",f:H,d:"WriteQuery.Delete"},1:{name:"view",a:11,type:z}});w(La,{"0":{name:"Mutate",f:H,d:"WriteQuery.Mutate"},1:{name:"view",a:11,type:z},2:{name:"mapping",a:11,type:F}});w(Ma,{"0":{name:"Insert",f:H,d:"WriteQuery.Insert"},1:{name:"table_ref",a:11,type:x},2:{name:"terms",m:h,a:11,type:z}});
w(Na,{"0":{name:"InsertStream",f:H,d:"WriteQuery.InsertStream"},1:{name:"table_ref",a:11,type:x},2:{name:"stream",a:11,type:z}});w(Oa,{"0":{name:"ForEach",f:H,d:"WriteQuery.ForEach"},1:{name:"stream",a:11,type:z},2:{name:"var",a:9,type:String},3:{name:"queries",m:h,a:11,type:H}});w(Pa,{"0":{name:"PointUpdate",f:H,d:"WriteQuery.PointUpdate"},1:{name:"table_ref",a:11,type:x},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:z},4:{name:"mapping",a:11,type:F}});
w(I,{"0":{name:"PointDelete",f:H,d:"WriteQuery.PointDelete"},1:{name:"table_ref",a:11,type:x},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:z}});w(Qa,{"0":{name:"PointMutate",f:H,d:"WriteQuery.PointMutate"},1:{name:"table_ref",a:11,type:x},2:{name:"attrname",a:9,type:String},3:{name:"key",a:11,type:z},4:{name:"mapping",a:11,type:F}});
w(Ra,{"0":{name:"TableopQuery",d:"TableopQuery"},1:{name:"type",a:14,defaultValue:1,type:{Za:1,cb:2,zb:3}},2:{name:"create",a:11,type:Sa},3:{name:"drop",a:11,type:x}});w(Sa,{"0":{name:"Create",f:Ra,d:"TableopQuery.Create"},1:{name:"datacenter",a:9,type:String},2:{name:"table_ref",a:11,type:x},3:{name:"primary_key",a:9,type:String}});
w(J,{"0":{name:"Query",d:"Query"},1:{name:"type",a:14,defaultValue:1,type:{Rb:1,hc:2,Ya:3,Vb:4,dc:5}},2:{name:"token",a:3,type:String},3:{name:"read_query",a:11,type:Ia},4:{name:"write_query",a:11,type:H},5:{name:"tableop_query",a:11,type:Ra}});
w(Ta,{"0":{name:"Response",d:"Response"},1:{name:"status_code",a:14,defaultValue:0,type:{Zb:0,$b:1,ac:2,bc:3,Ua:101,Ta:102,Tb:103}},2:{name:"token",a:3,type:String},3:{name:"response",m:h,a:9,type:String},4:{name:"error_message",a:9,type:String},5:{name:"backtrace",a:11,type:Ua}});w(Ua,{"0":{name:"Backtrace",f:Ta,d:"Response.Backtrace"},1:{name:"frame",m:h,a:9,type:String}});function K(a){return K.G(a)}fa("rethinkdb.query",K);function L(){}L.prototype.K=function(a,b){b=b||Va;b.K(this,a)};L.prototype.run=L.prototype.K;function M(){}n(M,L);M.prototype.$=function(){var a=new Ia,b=this.compile();a.ka(b);b=new J;b.b(1);r(b,3,a);return b};function Wa(){}n(Wa,L);function Xa(a){this.La=a}n(Xa,M);Xa.prototype.compile=function(){var a=new z;a.b(8);var b=JSON.stringify(this.La);r(a,9,b);return a};
function Ya(a,b){return function(){var c=new z;c.b(A);var d=new B,e=new E;e.b(a);b&&r(e,4,b);r(d,1,e);C(d,this.Aa.compile());C(d,this.Ga.compile());r(c,4,d);return c}}function N(a,b,c,d){var e=K[a]=function(a,b){this.Aa=a;this.Ga=b};n(e,M);e.prototype.compile=d?Ya(ya,b):Ya(b);L.prototype[c]=function(a){return a instanceof L?new e(this,a):new e(this,K.G(a))}}N("AddExpression",14,"add");N("SubtractExpression",15,"sub");N("MultiplyExpression",16,"mul");N("DivideExpression",17,"div");
N("ModuloExpression",18,"mod");N("EqualsExpression",1,"eq",h);N("NotEqualsExpression",2,"ne",h);N("LessThanExpression",3,"lt",h);N("LessThanOrEqualsExpression",4,"le",h);N("GreaterThanExpression",5,"gt",h);N("GreaterThanOrEqualsExpression",6,"ge",h);function Za(a){this.g=a}n(Za,M);Za.prototype.compile=function(){var a=new E;a.b(1);var b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};L.prototype.S=function(){return new Za(this)};L.prototype.not=L.prototype.S;
function $a(a){this.g=a}n($a,M);$a.prototype.compile=function(){var a=new E;a.b(26);var b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};L.prototype.length=function(){return new $a(this)};L.prototype.length=L.prototype.length;function ab(a){this.J=[];for(var b in arguments)arguments.hasOwnProperty(b)&&this.J.push(arguments[b])}n(ab,M);
ab.prototype.compile=function(){var a=new E;a.b(this.aa);var b=new B;r(b,1,a);for(a=0;a<this.J.length;a++)C(b,this.J[a].compile());a=new z;a.b(A);r(a,4,b);return a};function bb(a){ab.apply(this,arguments);this.aa=36}n(bb,ab);L.prototype.Y=function(a){return new bb(this,a)};L.prototype.and=L.prototype.Y;function cb(a){ab.apply(this,arguments);this.aa=35}n(cb,ab);L.prototype.ga=function(a){return new cb(this,a)};L.prototype.or=L.prototype.ga;
function db(a,b,c,d,e){this.g=a;this.Ia=b;this.va=c;this.pc="undefined"===typeof d?k:d;this.kc="undefined"===typeof e?k:e}n(db,M);db.prototype.compile=function(){var a=new Fa;a.u("id");var b=this.Ia.compile();r(a,2,b);b=this.va.compile();r(a,3,b);b=new E;b.b(37);r(b,11,a);a=new B;r(a,1,b);C(a,this.g.compile());b=new z;b.b(A);r(b,4,a);return b};L.prototype.na=function(a,b,c,d){return new db(this,a,b,c,d)};L.prototype.between=L.prototype.na;function eb(a,b,c){this.g=a;this.za=b;this.ia=c||i}n(eb,M);
eb.prototype.compile=function(){var a=new z;a.b(A);var b=new B,c=new E;c.b(11);r(b,1,c);C(b,this.g.compile());c=new z;c.b(6);r(c,7,this.za);C(b,c);c=new z;this.ia!==i?(c.b(6),r(c,7,this.ia)):c.b(0);C(b,c);r(a,4,b);return a};L.prototype.slice=function(a,b){return new eb(this,a,b)};L.prototype.slice=L.prototype.slice;L.prototype.Ba=function(a){return new eb(this,0,a)};L.prototype.limit=L.prototype.Ba;L.prototype.Ha=function(a){return new eb(this,a)};L.prototype.skip=L.prototype.Ha;
function fb(a,b){this.g=a;this.wa=b}n(fb,M);fb.prototype.compile=function(){var a=new z;a.b(A);var b=new B,c=new E;c.b(28);r(b,1,c);C(b,this.g.compile());c=new z;c.b(6);r(c,7,this.wa);C(b,c);r(a,4,b);return a};L.prototype.Ea=function(a){return new fb(this,a)};L.prototype.nth=L.prototype.Ea;
function gb(a,b){this.g=a;if(b instanceof hb)this.I=b;else if(b instanceof L)this.I=new hb([""],b);else{var c=new bb,d;for(d in b)if(b.hasOwnProperty(d)){var e=K.N(d).eq(K.G(b[d]));c.J.push(e)}this.I=new hb([""],c)}}n(gb,M);gb.prototype.compile=function(){var a=new Ha;a.U(this.I.F[0]);a.D(this.I.body.compile());var b=new Aa;r(b,1,a);a=new E;a.b(20);r(a,5,b);b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};L.prototype.filter=function(a){return new gb(this,a)};
L.prototype.filter=L.prototype.filter;function ib(a,b){this.g=a;b instanceof hb?this.Q=b:b instanceof L&&(this.Q=K.ca("",b))}n(ib,M);ib.prototype.compile=function(){var a=new F;a.U(this.Q.F[0]);a.D(this.Q.body.compile());var b=new Ba;b.v(a);a=new E;a.b(21);r(a,6,b);b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};L.prototype.map=function(a){return new ib(this,a)};L.prototype.map=L.prototype.map;function jb(a,b){this.g=a;this.ha=b}n(jb,M);
jb.prototype.compile=function(){var a=new E;a.b(23);for(var b=0;b<this.ha.length;b++){var c=h,d=this.ha[b];"-"===d[0]&&(c=k,d=d.slice(1));var e=new Da;e.L(d);r(e,2,c);ra(a,8,e)}b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};L.prototype.Fa=function(a){var b=Array.prototype.slice.call(arguments,0);return new jb(this,b)};L.prototype.orderby=L.prototype.Fa;function kb(a,b){this.g=a;this.Z=b||i}n(kb,M);
kb.prototype.compile=function(){var a=this.g;this.Z&&(a=a.map(K.N(this.Z)));var b=new E;b.b(24);var c=new B;r(c,1,b);C(c,a.compile());a=new z;a.b(A);r(a,4,c);return a};L.prototype.ua=function(a){return new kb(this,a)};L.prototype.distinct=L.prototype.ua;function lb(a,b,c){this.g=a;this.ma=b;this.T=c}n(lb,M);
lb.prototype.compile=function(){var a=new Ga,b=this.ma.compile();r(a,1,b);r(a,2,this.T.F[0]);r(a,3,this.T.F[1]);a.D(this.T.body.compile());b=new E;b.b(31);r(b,9,a);a=new B;r(a,1,b);C(a,this.g.compile());b=new z;b.b(A);r(b,4,a);return b};L.prototype.reduce=function(a,b){return new lb(this,a,b)};L.prototype.reduce=L.prototype.reduce;function nb(a){this.A=a}nb.prototype.W=function(a){return new O(a,this.A)};nb.prototype.table=nb.prototype.W;K.db=function(a){return new nb(a)};K.db=K.db;K.pa=function(){};K.db_create=K.pa;K.qa=function(){};K.db_drop=K.qa;K.ra=function(){};K.db_list=K.ra;K.G=function(a){return new Xa(a)};K.expr=K.G;K.W=function(a){var b=a.split("."),a=b[0],b=b[1];b===f&&(b=a,a=f);return new O(b,a)};K.table=K.W;function hb(a,b){this.F=a;this.body=b}K.ca=function(a){var b=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);return new hb(c,b)};K.fn=K.ca;function ob(a){this.Ma=a}n(ob,M);
ob.prototype.compile=function(){var a=new z;a.b(1);a.V(this.Ma);return a};function pb(a,b){this.g=a;this.O=b}n(pb,M);pb.prototype.compile=function(){var a=new E;a.b(2);a.L(this.O);var b=new B;r(b,1,a);C(b,this.g.compile());a=new z;a.b(A);r(a,4,b);return a};function qb(a){this.O=a}n(qb,M);qb.prototype.compile=function(){var a=new E;a.b(3);a.L(this.O);var b=new B;r(b,1,a);a=new z;a.b(A);r(a,4,b);return a};
K.N=function(a){for(var a=a.split("."),b=a.shift(),c=i,c="$"===b[0]?new ob(b.slice(1)):new qb(b);b=a.shift();)c=new pb(c,b);return c};K.R=K.N;function rb(){}rb.prototype.da=function(a,b){return 11==a.i||10==a.i?sb(this,b):b};function tb(a,b){this.e=a|0;this.c=b|0}var ub={};function vb(a){if(-128<=a&&128>a){var b=ub[a];if(b)return b}b=new tb(a|0,0>a?-1:0);-128<=a&&128>a&&(ub[a]=b);return b}function P(a){return isNaN(a)||!isFinite(a)?Q:a<=-wb?R:a+1>=wb?xb:0>a?S(P(-a)):new tb(a%T|0,a/T|0)}function U(a,b){return new tb(a,b)}var T=4294967296,wb=T*T/2,Q=vb(0),yb=vb(1),zb=vb(-1),xb=U(-1,2147483647),R=U(0,-2147483648),Ab=vb(16777216);l=tb.prototype;
l.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(V(this))return"0";if(0>this.c){if(this.h(R)){var b=P(a),c=W(this,b),b=Bb(c.multiply(b),this);return c.toString(a)+b.e.toString(a)}return"-"+S(this).toString(a)}for(var c=P(Math.pow(a,6)),b=this,d="";;){var e=W(b,c),j=Bb(b,e.multiply(c)).e.toString(a),b=e;if(V(b))return j+d;for(;6>j.length;)j="0"+j;d=""+j+d}};function Cb(a){return 0<=a.e?a.e:T+a.e}function V(a){return 0==a.c&&0==a.e}
l.h=function(a){return this.c==a.c&&this.e==a.e};function Db(a,b){if(a.h(b))return 0;var c=0>a.c,d=0>b.c;return c&&!d?-1:!c&&d?1:0>Bb(a,b).c?-1:1}function S(a){return a.h(R)?R:a.S().add(yb)}l.add=function(a){var b=this.c>>>16,c=this.c&65535,d=this.e>>>16,e=a.c>>>16,j=a.c&65535,g=a.e>>>16,p;p=0+((this.e&65535)+(a.e&65535));a=0+(p>>>16);a+=d+g;d=0+(a>>>16);d+=c+j;c=0+(d>>>16);return U((a&65535)<<16|p&65535,(c+(b+e)&65535)<<16|d&65535)};function Bb(a,b){return a.add(S(b))}
l.multiply=function(a){if(V(this)||V(a))return Q;if(this.h(R))return 1==(a.e&1)?R:Q;if(a.h(R))return 1==(this.e&1)?R:Q;if(0>this.c)return 0>a.c?S(this).multiply(S(a)):S(S(this).multiply(a));if(0>a.c)return S(this.multiply(S(a)));if(0>Db(this,Ab)&&0>Db(a,Ab))return P((this.c*T+Cb(this))*(a.c*T+Cb(a)));var b=this.c>>>16,c=this.c&65535,d=this.e>>>16,e=this.e&65535,j=a.c>>>16,g=a.c&65535,p=a.e>>>16,a=a.e&65535,u,s,G,mb;mb=0+e*a;G=0+(mb>>>16);G+=d*a;s=0+(G>>>16);G=(G&65535)+e*p;s+=G>>>16;s+=c*a;u=0+(s>>>
16);s=(s&65535)+d*p;u+=s>>>16;s=(s&65535)+e*g;u+=s>>>16;return U((G&65535)<<16|mb&65535,(u+(b*a+c*p+d*g+e*j)&65535)<<16|s&65535)};
function W(a,b){if(V(b))throw Error("division by zero");if(V(a))return Q;if(a.h(R)){if(b.h(yb)||b.h(zb))return R;if(b.h(R))return yb;var c=W(Eb(a,1),b).shiftLeft(1);if(c.h(Q))return 0>b.c?yb:zb;var d=Bb(a,b.multiply(c));return c.add(W(d,b))}if(b.h(R))return Q;if(0>a.c)return 0>b.c?W(S(a),S(b)):S(W(S(a),b));if(0>b.c)return S(W(a,S(b)));for(var e=Q,d=a;0<=Db(d,b);){for(var c=Math.max(1,Math.floor((d.c*T+Cb(d))/(b.c*T+Cb(b)))),j=Math.ceil(Math.log(c)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),g=P(c),p=g.multiply(b);0>
p.c||0<Db(p,d);)c-=j,g=P(c),p=g.multiply(b);V(g)&&(g=yb);e=e.add(g);d=Bb(d,p)}return e}l.S=function(){return U(~this.e,~this.c)};l.Y=function(a){return U(this.e&a.e,this.c&a.c)};l.ga=function(a){return U(this.e|a.e,this.c|a.c)};function Fb(a,b){return U(a.e^b.e,a.c^b.c)}l.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.e;return 32>a?U(b<<a,this.c<<a|b>>>32-a):U(0,b<<a-32)};function Eb(a,b){b&=63;if(0==b)return a;var c=a.c;return 32>b?U(a.e>>>b|c<<32-b,c>>b):U(c>>b-32,0<=c?0:-1)};function Gb(){this.k=0}n(Gb,rb);function X(a){throw new ga("Error deserializing incorrectly formated message, "+a);}function sb(a,b){for(var c=qa(b.H()),d=[],e=0,j=0;j<c.length;j++){var g=c[j];if(t(b,g.j)){var p=0;do{var u=a.da(g,b.get(g,p));d.push(u);e+=u.byteLength;p++}while(g.z&&p<ta(b,g.j))}}c=new Uint8Array(e);for(j=e=0;j<d.length;j++)g=d[j],c.set(new Uint8Array(g),e),e+=g.byteLength;return c}
Gb.prototype.da=function(a,b){var c=a.i,d=Hb[c],e=Ib(P(a.j<<3|d)),j;switch(d){case Y:var g=P(b);if(c==ma||17==c)g=Fb(g.shiftLeft(1),Eb(g,63));j=Ib(g);break;case Jb:g=new ArrayBuffer(8);c=new DataView(g);switch(a.i){case 1:c.setFloat64(0,b,h);break;case ka:j=P(b);c.setUint32(0,Cb(j),h);c.setUint32(4,j.c,h);break;case la:j=P(b);c.setUint32(0,Cb(j),h);c.setInt32(4,j.c,h);break;default:X("Unexpected field type")}j=new Uint8Array(g);break;case Kb:switch(a.i){case 11:g=sb(this,b);break;case 9:case 12:g=
TextEncoder("utf-8").encode(b);break;default:X("Unexpected field type")}j=g.length;c=Ib(P(j));j=new Uint8Array(c.length+j);j.set(c,0);j.set(g,c.length);break;case Lb:X("Use of Groups deprecated and not supported");break;case Mb:g=new ArrayBuffer(4);c=new DataView(g);switch(a.i){case 2:c.setFloat32(0,b,h);break;case 7:c.setUint32(0,b,h);break;case 15:c.setInt32(0,b,h);break;default:X("Unexpected field type")}j=new Uint8Array(g);break;default:X("Unexpected wire type")}g=new Uint8Array(e.length+j.length);
g.set(new Uint8Array(e),0);g.set(new Uint8Array(j),e.length);return g};function Ib(a){function b(a){var d=P(128),d=Bb(a,W(a,d).multiply(d)).e,e=P(127);0<Db(a,e)?(d+=128,a=b(Eb(a,7)),a.unshift(d)):a=[d];return a}a=b(a);return new Uint8Array(a)}
function Nb(a,b,c){var d=b.H();for(a.k=0;a.k<c.length;){var e=Ob(a,c),j=d.o[parseInt(e>>3,10)]||i,g=a,p=e%8,u=j,e=c,s=f;switch(p){case Y:e=Ob(g,e);if(u){g=f;switch(u.i){case ia:case ja:g=e.toString();break;case 5:case 13:case 14:g=e;break;case 17:e=P(e);g=Fb(Eb(e,1),e.shiftLeft(63)).e;break;case ma:e=P(e);g=Fb(Eb(e,1),e.shiftLeft(63)).toString();break;case 8:g=0===g?k:h;break;default:X("Unexpected field type")}s=g}else s=i;break;case Kb:p=e;e=Ob(g,p);p=new Uint8Array(p.buffer,p.byteOffset+g.k,e);
g.k+=e;if(u){e=f;switch(u.i){case 9:case 12:e=TextDecoder("utf-8").decode(p);break;case 11:e=p;g=new Gb;u=new u.fa.r.Ca;Nb(g,u,e);e=u;break;default:X("Unexpected field type")}s=e}else s=i;break;case Mb:e=new DataView(e.buffer,g.k,4);g.k+=4;if(u){g=f;switch(u.i){case 2:g=e.getFloat32(0,h);break;case 7:g=e.getUint32(0,h);break;case 15:g=e.getInt32(0,h);break;default:X("Unexpected field type")}s=g}else s=i;break;case Jb:e=new DataView(e.buffer,g.k,8);g.k+=8;if(u){g=f;switch(u.i){case 1:g=e.getFloat64(0,
h);break;case ka:g=(new tb(e.getUint32(0,h),e.getUint32(4,h))).toString();break;case la:g=(new tb(e.getUint32(0,h),e.getInt32(4,h))).toString();break;default:X("Unexpected field type")}s=g}else s=i;break;default:X("Unexpected wire type of "+p)}e=s;j!=i&&e!=i&&(j.z?b.add(j,e):b.set(j,e))}}function Ob(a,b){var c=b[a.k++];if(127<c)var c=c-128,d=Ob(a,b),c=c+(d<<7);return c}var Y=0,Jb=1,Kb=2,Lb=3,Mb=5,Hb=[-1,Jb,Mb,Y,Y,Y,Jb,Mb,Y,Kb,Lb,Kb,Kb,Y,Y,Mb,Jb,Y,Y];function Z(a){this.sa=a||"";this.B={};this.Da=1;Va=this}Z.prototype.close=function(){};Z.prototype.K=function(a,b){var c=a.$();c.la((this.Da++).toString());this.B[c.s()]=b;var c=sb(new Gb,c),d=c.byteLength,e=new Uint8Array(d+4);(new DataView(e.buffer)).setInt32(0,d,h);e.set(c,4);this.ja(e.buffer)};Z.prototype.run=Z.prototype.K;
function Pb(a,b){if((new DataView(b.buffer)).getUint32(0,h)!==b.length-4)throw"message is wrong length";try{var c=new Ta;Nb(new Gb,c,new Uint8Array(b.buffer,4));var d=q(c,1),e=a.B[c.s()];switch(d){case 101:throw"Broken client";case 103:throw"Runtime error";case 102:throw"bad query";case 0:delete a.B[c.s()];e&&e();break;case 3:delete a.B[c.s()];if(e){var j=sa(c,c.o[3]);j==i||m(j);var g=(j||[]).map(JSON.parse);e(g)}break;case 1:delete a.B[c.s()];if(e){var p=JSON.parse(q(c,3,0));e(p)}break;case 2:throw"partial results not yet implemented";
default:throw"unknown response status code";}}catch(u){throw u;}};function $(a,b,c){Z.call(this,i);this.t=i;this.oc=0;var d=this;d.w=i;var e;e=a?m(a)?a:[a]:["localhost"];var j=require("net");(function p(){var a=e.shift();if(a){var s;"string"===typeof a?(s=a,a=11211):(s=a.host||"localhost",a=a.port||11211);var G=j.connect(a,s,function(){G.on("data",ea(d.Ja,d));d.w=G;b&&b(d)});G.on("error",p)}else c&&c()})()}n($,Z);fa("rethinkdb.net.TcpConnection",$);
$.prototype.ja=function(a){if(this.w){for(var b=new Buffer(a.byteLength),c=new Uint8Array(a),d=0;d<a.byteLength;d++)b[d]=c[d];this.w.write(b)}else throw"Connection not open";};
$.prototype.Ja=function(a){for(var a=new Uint8Array(a),b=0,c=a.byteLength;0<c;){if(this.t===i){var d=(new DataView(a.buffer,b,c)).getUint32(0,h);this.t=new Uint8Array(d+4);this.C=0}var d=this.t.byteLength-this.C,e=c<d?c:d,j=new Uint8Array(a.buffer,b,e);this.t.set(j,this.C);this.C+=e;b+=e;c-=e;d-=e;0>=d&&(d=this.t,this.t=i,this.C=0,Pb(this,d))}};$.prototype.close=function(){if(this.w)this.w.end(),this.w=i;else throw"Connection not open";};$.prototype.close=$.prototype.close;function Qb(a,b){Z.call(this,b);this.Ka=a}n(Qb,Z);fa("rethinkdb.net.HttpConnection",Qb);Qb.prototype.ja=function(a){var b=new XMLHttpRequest;b.responseType="arraybuffer";b.open("POST",this.Ka,h);var c=this;b.onreadystatechange=function(){4===b.readyState&&200===b.status&&Pb(c,new Uint8Array(b.response))};b.send(a)};fa("rethinkdb.net.connect",function(a,b,c){return new $(a,b,c)});var Va=i;fa("rethinkdb.net.last_connection",Va);function O(a,b){this.oa=b||i;this.A=a}n(O,M);O.prototype.compile=function(){var a=new z;a.b(13);var b=new xa,c=new x,d;if(!(d=this.oa))d=Va.sa;r(c,1,d);r(c,2,this.A);b.n(c);r(a,15,b);return a};function Rb(a,b){this.X=a;this.ya=new Xa(b)}n(Rb,M);Rb.prototype.compile=function(){var a=this.X.compile(),b=q(a,15).p(),a=new D;a.n(b);a.u("id");a.M(this.ya.compile());b=new z;b.b(12);r(b,14,a);return b};O.prototype.get=function(a){return new Rb(this,a)};O.prototype.get=O.prototype.get;
function Sb(a,b){this.X=a;m(b)||(b=[b]);this.ba=b}n(Sb,Wa);Sb.prototype.$=function(){var a=this.X.compile(),b=q(a,15).p(),a=new Ma;a.n(b);for(b=0;b<this.ba.length;b++){var c=(new Xa(this.ba[b])).compile();ra(a,2,c)}b=new H;b.b(4);r(b,5,a);a=new J;a.b(2);r(a,4,b);return a};O.prototype.xa=function(a){return new Sb(this,a)};O.prototype.insert=O.prototype.xa;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports?exports=module.exports=aa.rethinkdb:exports.rethinkdb=aa.rethinkdb);
}).call(this);
