<script id="dataexplorer_view-template" type="text/x-handlebars-template">
    <h1 class="title status">Data Explorer</h1>
</script>


<script id="dataexplorer_input_query-template" type="text/x-handlebars-template">
    <div class="input_query_container" >
        <textarea class="input_query"></textarea>
        <div class="suggestion_list_container">
            <ul class="suggestion_name_list"></ul>
        </div>
        <div class="suggestion_description"></div>
        <div class="button_container">
            <input type="button" value="clear" class="btn button_query clear_query" />
            <input type="button" value="execute" class="btn button_query execute_query" />
        </div>

    </div>
    <div class="loading_query">
        <img src="/images/ajax-loader.gif" class="loading_query_img"/>
    </div>
</script>


<script id="dataexplorer_suggestion_name_li-template" type="text/x-handlebars-template">
    <li class="suggestion_name_li" data-id={{id}}>{{suggestion}}</li>
</script>

<script id="dataexplorer_suggestion_name_li-template" type="text/x-handlebars-template">
    You have to choose the database that contains the tables you want to query on.
</script>
<script id="dataexplorer_suggestion_name_li-template" type="text/x-handlebars-template">
    You have to choose a table where you will run your query.
</script>


<script id="dataexplorer_default_view-template" type="text/x-handlebars-template">
    <h2>Quick Start</h2>
    <p>You can automatically build a query by clicking on a table or on a previous query. You can then modify them as you wish.</p>
    <p>The data explorer is equipped with a suggestion feature, but if you are lost, you can find more details in the <a href="#help">help page</a>.</p>

    <div class="namespaces_available_container">
        <h3>Tables available</h3>

        {{#if has_namespaces}}
        <ul class="namaspaces_available_list">
            {{#each namespaces}}
            <li class="namespace_element"><a href="#" data-name="{{name}}" class="namespace_link">{{name}}</a></li>
            {{/each}}
        </ul>
        {{else}}
        There is no table available. <br />Start by <a href="#tables">creating one</a>.
        {{/if}}
   </div>
    <div class="history_queries">
        <h3>Previous query</h3>
        
        <div class="history_query_container">
        {{#if has_old_queries}}
        <ul class="history_queries_list">
            {{#each old_queries}}
            <li class="query_element"><a href="#" class="old_query" data-query="{{this}}">{{this}}</a></li>
            {{/each}}
        </ul>
        {{else}}
        <p>There are no previous queries</p>
        {{/if}}
    </div>
    </div>
</script>

<script id="dataexplorer-error-template" type="text/x-handlebars-template">
    <h2>Error</h2>
    <p>The following query could not be executed.</p>
    <p>Error: {{error}}</p>
</script>

<script id="dataexplorer_query_list-template" type="text/x-handlebars-template">
    <ul class="history_query_list">
    </ul>
</script>

<script id="dataexplorer_query_element-template" type="text/x-handlebars-template">
    <li class="query_element">{{query}}</a></li>
</script>


<script id="dataexplorer_result_container-template" type="text/x-handlebars-template">
    <div class="results_header">
        <div class="options_container">
            <input type="button" value="Home" class="btn button_query home_view" />
            <input type="button" value="Full view" class="btn button_query change_size" />
        </div>

        <h2>Results</h2>
        <p class="query_executed">For query: {{query}}</p>

        <ul class="nav nav-tabs change_view_container"">
            <li><a href="#raw_view" data-toggle="tab" class="link_to_raw_view">Raw view</a></li>
            <li><a href="#table_view" data-toggle="tab" class="link_to_table_view">Table view</a></li>
            <li class="active"><a href="#tree_view" data-toggle="tab" class="link_to_tree_view">Tree view</a></li>
        </ul>
 
   </div>

   <div class="tab-content">  
        <div class="tab-pane results" id="tree_view">
        </div>
        <div class="tab-pane results" id="table_view">
        </div>
        <div class="tab-pane results" id="raw_view">
            <textarea class="raw_view_textarea"></textarea>
        </div>
    </div>
</script>


<script id="dataexplorer_result_empty-template" type="text/x-handlebars-template">
    <p>No result were returned for this query</p>
</script>


<!-- Keep </script> without space/new line before so the comma stick to the value of the object-->
<script id="dataexplorer_result_json_tree_container-template" type="text/x-handlebars-template">
    <span class="jta_arrow jta_arrow_h"></span><div class="json_tree">{{print_safe tree}}</div></script>

<script id="dataexplorer_result_json_tree_span-template" type="text/x-handlebars-template">
    <span class="jt_editable {{classname}}" contentEditable="true">{{value}}</span></script>

<script id="dataexplorer_result_json_tree_span_with_quotes-template" type="text/x-handlebars-template">
    <span class="{{classname}}">"</span><span class="jt_editable {{classname}}" contentEditable="true">{{value}}</span><span class="{{classname}}">"</span></script>

<script id="dataexplorer_result_json_tree_url-template" type="text/xs-handlebars-template">
    <span class="jt_editable jt_url" contentEditable="true">{{url}}</span>,
    <a href="{{url}}" class="jt_link">»</a></script>

<script id="dataexplorer_result_json_tree_email-template" type="text/xs-handlebars-template">
    <span class="jt_editable jt_email" contentEditable="true">{{email}}</span>,
    <a href="mailto:{{email}}" class="jt_link">»</a></script>

<script id="dataexplorer_result_json_tree_array-template" type="text/x-handlebars-template">

    {{#if no_value}}
    [ ]
    {{else}}
    <span class="jt_arrow"></span>
    <span class="jt_b">[</span>
    <span class="jt_points">...</span>
    <ul class="jt_array jt_collapsible">
        {{#each values}}
        <li>
            {{print_safe value}}{{#unless no_comma}}, {{/unless}}
        </li>
        {{/each}}
    </ul>
    <span class="jt_b jt_close">]</span>{{/if}}</script>

<script id="dataexplorer_result_json_tree_object-template" type="text/x-handlebars-template">
    {{#if no_value}}
    { } 
    {{else}}
    <span class="jt_arrow"></span>
    <span class="jt_b">{</span>
    <span class="jt_points">...</span>
    <ul class="jt_object jt_collapsible">
        {{#each values}}
        <li>
                "{{this.key}}": {{print_safe this.value}}{{#unless no_comma}}, {{/unless}}
        </li>
        {{/each}}
    </ul>
    <span class="jt_b jt_close">}</span>{{/if}}</script>





<script id="dataexplorer_result_json_table_container-template" type="text/x-handlebars-template">
    <div class="json_table_container">
        <table class="json_table">
            {{print_safe table_attr}}
            {{print_safe table_data}}
        </table>
    </div>
</script>

<script id="dataexplorer_result_json_table_tr_attr-template" type="text/xs-handlebars-template">
    <tr class="jta_tr">
        {{#each attr}}
        <td class="td_attr col-{{col}}" data-col={{col}}>
            <div class="jta_attr">{{key}}</div>
        </td>
        {{/each}}
    </tr>
</script>



<script id="dataexplorer_result_json_table_tr_value-template" type="text/xs-handlebars-template">
    {{#each document}}
    <tr class="jta_tr">
        {{#each cells}}
            {{print_safe this}}
        {{/each}}
    </tr>
    {{/each}}
</script>

<script id="dataexplorer_result_json_table_td_attr-template" type="text/xs-handlebars-template">
    <td class="td_attr {{classtd}}" data-col={{col}}>
        <div class="jta_attr">{{key}}</div>
    </td>
</script>

<script id="dataexplorer_result_json_table_td_value-template" type="text/xs-handlebars-template">
    <td class="{{class_td}}">
        {{print_safe cell_content}}
    </td>
</script>

<script id="dataexplorer_result_json_table_td_value_content-template" type="text/xs-handlebars-template">
        {{#if data_to_expand}}
        <div class="{{class_value}} jta_value {{classname}}">       
            <span data-json_data="{{data_to_expand}}" class="jta_object">
                <span class="jta_arrow jta_arrow_v"></span>
                <span class="jta_arrow jta_arrow_h"></span>
                <strong>{{print_safe value}}</strong>
            </span>
        </div>
        {{else}}
        <div class="jta_value {{class_value}} {{classname}}">
            <span contenteditable="true">
                {{print_safe value}}
            </span>
        </div>
        {{/if}}
</script>



<!-- Ugly indentation to avoid extra spaces before comma -->
<script id="dataexplorer_result_json_table_data_inline-template" type="text/xs-handlebars-template">
    {{#if data_to_expand}}
    <span data-json_data="{{data_to_expand}}" class="jta_object">
        <span class="jta_arrow jta_arrow_v"></span>
        {{#unless is_inline}}<span class="jta_arrow jta_arrow_h"></span>{{/unless}}
        <strong>{{print_safe value}}</strong>
        {{#if need_comma}}, {{/if}}
    </span>
    {{else}}
    <span contenteditable="true" class={{classname}}>{{print_safe value}}</span>{{#if need_comma}}, {{/if}}
    {{/if}}
</script>

