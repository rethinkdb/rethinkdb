<script id="dashboard_view-template" type="text/x-handlebars-template">
  <div id="cluster_status_container"></div>
  <div id="cluster_performance_container" class="dashboard-view"></div>
</script>


<script id="cluster_status-template" type="text/x-handlebars-template">
  <h1 class="title status">Cluster status</h1>
  <table class="status">
      <tr>
          {{#if has_availability_problems}}
          <td class="problems-detected availability">
              <h3>Availability</h3>
              <p class="message">
                Availability issues
              detected
              </p>
              {{#if has_masters_down}}
              <p class="details">{{num_masters_offline}} of {{num_masters}} 
              <a href="#" class="json" rel="dashboard_details" data-content="{{pluralize_noun "Namespace" num_master_offline}} not available: {{links_to_masters_and_namespaces masters_offline}}" data-title="Availability problems">
                  {{pluralize_noun "master" num_masters_offline}} 
              </a>
              not available</p>
              {{/if}}
              {{#if has_namespaces_without_masters}}
              <p class="details">{{num_namespaces_without_masters}} 
              <a href="#" class="json" rel="dashboard_details" data-content="{{pluralize_noun "Namespace" num_master_offline}} with shards not available: {{links_to_namespaces namespaces_without_masters}}" data-title="Availability problems">
              {{pluralize_noun "table" num_namespaces_without_masters}}
              </a>
              {{pluralize_verb_to_have num_namespaces_without_masters}} some shards without master.</p>
              {{/if}}
          </td>
          {{else}}
          <td class="no-problems-detected availability">
              <h3>Availability</h3>
              <p class="message">No availability issues detected</p>
              <p class="details">{{num_masters}} of {{num_masters}} {{pluralize_noun "master" num_masters}} are online</p>
          </td>
          {{/if}}

          {{#if has_persistence_problems}}
          <td class="problems-detected persistence">
              <h3>Persistence</h3>
              <p class="message">Disk problems detected</p>

              <p class="details">
                {{num_machines_with_disk_problems}} of {{num_machines}} 
                <a href="#" class="json" rel="dashboard_details" data-content="The following {{pluralize_noun "server" num_machines_with_disk_problems}} can't write logs: {{links_to_machines machines_with_disk_problems false}}" data-title="Log file write problems">
                  {{pluralize_noun "server" num_machines}}
                </a>
                have disk problems
              </p> 

              <p class="details"><a href="#resolve_issues">Resolve issues</a></p>
          {{else}}
          <td class="no-problems-detected persistence">
              <h3>Persistence</h3>
              <p class="message">No disk problems detected</p>
              <p class="details">{{num_machines}} of {{num_machines}} {{pluralize_noun "server" num_machines}} {{pluralize_verb_to_have num_machines}} working disks</p>
          </td>
          {{/if}}

          {{#if has_conflicts_problems}}
          <td class="problems-detected conflicts">
              <h3>Consistency</h3>
              <p class="message">{{num_conflicts}} {{pluralize_noun "conflict" num_conflicts}} detected</p>
              <p class="details"><a href="#resolve_issues">Resolve issues</a></p>
          </td>
 
          {{else}}
          <td class="no-problems-detected conflicts">
              <h3>Consistency</h3>
              <p class="message">No conflicts detected</p>
              <p class="details">{{num_namespaces}} of {{num_namespaces}} tables are operating correctly</p>
          </td>
          {{/if}}
      </tr>
      <tr>
          {{#if has_redundancy_problems}}
          <td class="problems-detected redundancy">
              <h3>Redundancy</h3>
              <p class="message">Redundancy issues detected</p>
              <p class="details">{{num_replicas_offline}} of {{num_replicas}}
              <a href="#" class="json" rel="dashboard_details" data-content="{{pluralize_noun "replica" num_master_offline}} having problems: {{links_to_replicas_and_namespaces replicas_offline}}" data-title="Redundancy problems">
                 {{pluralize_noun "replica" num_replicas_offline}}
              </a>    
              {{pluralize_verb_to_have num_replicas_offline}} issues</p>
          </td>
          {{else}}
            <td class="no-problems-detected redundancy">
                <h3>Redundancy</h3>
                <p class="message">No redundancy issues detected</p>
                <p class="details">{{num_replicas}} of {{num_replicas}} {{pluralize_noun "replica" num_replicas}} are online</p>
            </td>
        {{/if}}

        {{#if has_disk_problems}}
        <td class="problems-detected disk_distro">
            <h3>Disk usage</h3>
            <p class="details">
                {{num_machines_with_disk_full_problems}} of {{num_machines}} 
                <a href="#" class="json" rel="dashboard_details" data-content="The following {{pluralize_noun "server" num_machines_with_disk_problems}} {{pluralize_verb_to_have num_machines_with_disk_problems}} use too much disk: {{links_to_machines machines_with_disk_full_problems false}}" data-title="Disk problems">
                  {{pluralize_noun "server" num_machines}}
                </a>
                {{pluralize_verb "use"  num_machines_with_disk_problems}} more than {{threshold_disk}}% of {{pluralize_its num_machines_width_disk_problems}} disk.
              </p> 
          {{else}}
          <td class="no-problems-detected disk_distro">
              <h3>Disk distribution</h3>
              <p class="message">No Disk problems detected</p>
              <p class="details">{{num_machines}} of {{num_machines}} servers {{pluralize_verb "use" num_machines}} less full than {{threshold_disk}}% of {{pluralize_its}} disk</p>
          </td>
          {{/if}}
          {{#if has_ram_problems}}
          <td class="problems-detected ram">
              <h3>RAM</h3>
              <p class="details">
                {{num_machines_with_ram_problems}} of {{num_machines}} 
                <a href="#" class="json" rel="dashboard_details" data-content="The following {{pluralize_noun "server" num_machines_with_disk_problems}} {{pluralize_verb_to_have num_machines_with_disk_problems}} use too much memory: {{links_to_machines machines_with_ram_problems false}}" data-title="RAM problems">
                  {{pluralize_noun "server" num_machines}}
                </a>
                use more than {{threshold_ram}}% of their memory
              </p> 
          {{else}}
          <td class="no-problems-detected ram">
              <h3>RAM</h3>
              <p class="message">No memory problems detected</p>
              <p class="details">{{num_machines}} of {{num_machines}} servers utilize less than {{threshold_ram}}% of their memory</p>
          </td>
          {{/if}}



      </tr>
  </table>
</script>


<script id="cluster_performance-template" type="text/x-handlebars-template">
  <div id="cluster_performance_panel_placeholder"></div>
</script>

