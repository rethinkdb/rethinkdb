desc: Tests meta operations in composite queries
tests:

    # Remove the stupid test database
    - cd: r.db_drop('test')
      ot: partial({'dbs_dropped':1})

    - py: |
        r.expr([1,2,3]).for_each(lambda row:
            r.db_create('db_' + row.coerce_to('string')))
      ot: ({'dbs_created':3,'config_changes':arrlen(3)})

    - py: |
        r.db_list().set_difference(["rethinkdb"]).for_each(lambda db_name:
            r.expr([1,2,3]).for_each(lambda i:
                r.db(db_name).table_create('tbl_' + i.coerce_to('string'))))
      ot: partial({'tables_created':9})

    - py: |
        r.db_list().set_difference(["rethinkdb"]).for_each(lambda row:
            r.db_drop(row))
      ot: partial({'dbs_dropped':3,'tables_dropped':9})

    # Re-add stupid 'test' database
    - cd: r.db_create('test')
      ot: partial({'dbs_created':1})
